#!/bin/bash # unnecessary, but helps vim identify the filetype

export PROMPTDIR="${HOME}/.bashprompt/"
# http://www.thegeekstuff.com/2013/12/bash-completion-complete/
# If you add a new prompt, it won't be visible in bash completion until you
# run the following command again.
complete -W "$(ls ${PROMPTDIR}/prompts)" promnow

function promnow_help () {
    echo "promnow <PROMPTNAME>"
    if [ -n "${_p_NAME}" ]
    then
        echo "You are currently using the '${_p_NAME}' prompt."
    fi
    echo "You must supply a single prompt name."
    echo "Available prompts are:"
    ls "${PROMPTDIR}prompts/"
}

function promnow () {
    if [ $# -eq 1 ]
    then
        promfullname="${PROMPTDIR}prompts/${1}"
        if [ -e ${promfullname} ]
        then
            pushd ${PROMPTDIR} > /dev/null
            prom_name="${1}"
            unset PROMPT_COMMAND
            source "${promfullname}"
            export _p_NAME="${1}"
            popd > /dev/null
        else
            echo "Couldn't find prompt '${1}'"
            promnow_help
        fi
    else
        promnow_help
    fi
}

